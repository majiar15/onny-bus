mapboxgl.accessToken = 'pk.eyJ1IjoibWFqaWFyIiwiYSI6ImNrYWZybXh5ZTAxeDYyeHB4eWIyZWFlZTQifQ.tpO4S2b6RQvsgRCB08joCQ';
let map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [-74.796387, 10.910769],
    zoom: 13
});
let markerArray = []
// setInterval(() => {

//     fetch('https://onny-bus.herokuapp.com/api/rutas/asignar/getall', {
//         method: 'GET',
//         headers: {
//             'Content-Type': 'application/json'
//         }
//     })
//         .then(response => response.json())
//         .then(data => {
//             console.log(data);
//             for (let i = 0; i < data.data.length; i++) {
//                 const element = data.data[i];
//                 if (markerArray.length === data.data.length) {
//                     markerArray[i].setLngLat([element.conductor.longitud, element.conductor.latitud]);
//                 } else {
//                     let marker = new mapboxgl.Marker()
//                         .setLngLat([element.conductor.longitud, element.conductor.latitud])
//                         .addTo(map);
//                     markerArray.push(marker)
//                 }
//             }

//         });
// }, 1000);

map.on('load', function () {
    map.addSource('lines', {
        'type': 'geojson',
        'data': {
            'type': 'FeatureCollection',
            'features': [
                {
                    'type': 'Feature',
                    'properties': {
                        'color': '#F7455D' // red
                    },
                    'geometry': {
                        'type': 'LineString',
                        'coordinates': [
                            [-74.780881, 10.978776],
                            [-74.780624, 10.979774],
                            [-74.780339, 10.979692],
                            [-74.778753, 10.979024],
                            [-74.778605, 10.978964],
                            [-74.777515, 10.978298],
                            [-74.777909, 10.977580],
                            [-74.778364, 10.976630],
                            [-74.776785, 10.975952],
                            [-74.775384, 10.975405],
                            [-74.774454, 10.970449],
                            [-74.774461, 10.969357],
                            [-74.774493, 10.969083],
                            [-74.775232, 10.965920],
                            [-74.775368, 10.965329],
                            [-74.775373, 10.964995],
                            [-74.775290, 10.963579],
                            [-74.774703, 10.958503],
                            [-74.774000, 10.954734],
                            [-74.773832, 10.950473],
                            [-74.773838, 10.950170],
                            [-74.774071, 10.949543],
                            [-74.774147, 10.949187],
                            [-74.773982, 10.948957],
                            [-74.773504, 10.948482],
                            [-74.773198, 10.947455],
                            [-74.772937, 10.946932],
                            [-74.771035, 10.944664],
                            [-74.770821, 10.944298],
                            [-74.770000, 10.942139],
                            [-74.769605, 10.941182],
                            [-74.768705, 10.939565],
                            [-74.766608, 10.936040],
                            [-74.764887, 10.933669],
                            [-74.764822, 10.933522],
                            [-74.764726, 10.932966],
                            [-74.764461, 10.930857],
                            [-74.764208, 10.927173],
                            [-74.764115, 10.926492],
                            [-74.764023, 10.926107],
                            [-74.763905, 10.925532],
                            [-74.763791, 10.924887],
                            [-74.763700, 10.923882],
                            [-74.763554, 10.921856],
                            [-74.763556, 10.921368],
                            [-74.763618, 10.920841],
                            [-74.765265, 10.917207],
                            [-74.765688, 10.916057],
                            [-74.766261, 10.914353],
                            [-74.766789, 10.912944],
                            [-74.767225, 10.911979],
                            [-74.768054, 10.908618],
                            [-74.768123, 10.907656],
                            [-74.768524, 10.905317],
                            [-74.768706, 10.904512],
                            [-74.769486, 10.904613],
                            [-74.769662, 10.904521],
                            [-74.769505, 10.904089],
                            [-74.769301, 10.902680],
                            [-74.769205, 10.900468],
                            [-74.769179, 10.898589],
                            [-74.769972, 10.888524],
                            [-74.769841, 10.887144],
                            [-74.769415, 10.884652],
                            [-74.769372, 10.882310],
                            [-74.770090, 10.874891],
                            [-74.770749, 10.872862],
                            [-74.772346, 10.865112],
                            [-74.772551, 10.865021],
                            [-74.772932, 10.864001],
                            [-74.773178, 10.863395],
                            [-74.773562, 10.861981],
                            [-74.775466, 10.862501],
                            [-74.776273, 10.862709],
                            [-74.777129, 10.862891],
                            [-74.777596, 10.863028],
                            [-74.777640, 10.863104],
                            [-74.783060, 10.861105],
                            [-74.783508, 10.860978],
                            [-74.784066, 10.860910],
                            [-74.788536, 10.860871],
                            [-74.792166, 10.861300],
                            [-74.793943, 10.861232],
                            [-74.796669, 10.861124],
                            [-74.799085, 10.861160],
                            [-74.815247, 10.861499],
                            [-74.816471, 10.861590],
                            [-74.823609, 10.862439],
                            [-74.824947, 10.862944],
                            [-74.825260, 10.863022],
                            [-74.825708, 10.863053],
                            [-74.827460, 10.862819],
                            [-74.828139, 10.862855],
                            [-74.830606, 10.863139],
                            [-74.835079, 10.863624],
                            [-74.835838, 10.862104],
                            [-74.835977, 10.860951],
                        ]
                    }
                },
                {
                    'type': 'Feature',
                    'properties': {
                        'color': '#33C9EB' // blue
                    },
                    'geometry': {
                        'type': 'LineString',
                        'coordinates': [
                            [-74.76938009273, 10.883527614658451],
                            [-74.76943731329813, 10.881833092752512],
                            [-74.76965188936448, 10.880138560890737],
                            [-74.7697806353972, 10.878972576976604],
                            [-74.76985931265517, 10.877820637009332],
                            [-74.76997017838586, 10.876640596111042],
                            [-74.7700703139708, 10.875460550542716],
                            [-74.77022767045129, 10.874308597007857],
                            [-74.7707891459868, 10.872847575882549],
                            [-74.77117538408494, 10.870915926245285],
                            [-74.77130770650544, 10.870399647457448],
                            [-74.77145433382249, 10.869918488368222],
                            [-74.77161169095781, 10.868928070976542],
                            [-74.77226614930261, 10.865781191174651],
                            [-74.77231442906488, 10.865127928784895],
                            [-74.77257907390596, 10.864913686455196],
                            [-74.772806167166, 10.864432517878312],
                            [-74.77314233714425, 10.863459643439977],
                            [-74.77345705010522, 10.86350530199526],
                            [-74.77375030473924, 10.862557009394997],
                            [-74.77421522140504, 10.861246956433149],
                            [-74.77470874786378, 10.859887726285192],
                            [-74.77506995157457, 10.85882703119014],
                            [-74.77535605408777, 10.858012189257686],
                            [-74.77599620688125, 10.858461756830042],
                            [-74.77768421085784, 10.857590718642207],
                            [-74.77866411165452, 10.856747774984155],
                            [-74.780800938388, 10.854628114768525],
                            [-74.7817790501722, 10.853969559211123],
                            [-74.78378891857574, 10.852364433934419],
                            [-74.78296101033267, 10.8513054675461],
                            [-74.78250503496385, 10.850771592790759],
                            [-74.78336513004251, 10.850076149105657],
                            [-74.78318810408379, 10.849867164342653],
                            [-74.78300571419823, 10.849661691891473],
                            [-74.78280723040372, 10.849491342775588],
                            [-74.78264629786283, 10.849320993562582],
                            [-74.7824227806632, 10.848999613086212],
                            [-74.7822868821822, 10.848857362690733],
                            [-74.78204905943132, 10.848750235308776],
                            [-74.7807115313117, 10.848272553815749],
                            [-74.77934181635648, 10.847763260042491],
                            [-74.77971374923074, 10.846765744524754],
                            [-74.77839946681344, 10.846258204594891],
                            [-74.77783799127793, 10.846001800172294],
                            [-74.7772389648162, 10.845780518959929],
                            [-74.77632701342374, 10.848096935515482],
                            [-74.7758156056807, 10.849466756358549],
                            [-74.77569043603582, 10.849733695181394],
                            [-74.77558672373561, 10.849995365084732],
                            [-74.77538287585048, 10.85049236180859],
                            [-74.77377355076896, 10.849860139592108],
                            [-74.77373063509732, 10.849096202985226],
                            [-74.77214455571813, 10.849173474785326],
                            [-74.77118074850297, 10.84912254550402],
                            [-74.77053344227899, 10.849080397215493],
                            [-74.7702491281234, 10.849078641304533],
                            [-74.77032423030325, 10.850102492020483],
                            [-74.77042794227602, 10.851467035179452],
                            [-74.77051734935232, 10.8523486284983],
                            [-74.77081239234396, 10.853217926403365],
                            [-74.77106094360353, 10.854600016534796],
                            [-74.77142035961153, 10.855987369170693],
                            [-74.77130413044506, 10.856607285429419],
                            [-74.77118611357584, 10.857304469938798],
                            [-74.7710752488274, 10.857813747452884],
                            [-74.77099299452676, 10.858337072879982],
                            [-74.77079093467184, 10.859290646915564],
                            [-74.77065503586346, 10.859784115839691],
                            [-74.7705531119209, 10.860296901298117],
                            [-74.77051556132211, 10.860807929712605],
                            [-74.77060139201058, 10.861324225573187],
                            [-74.77076947667229, 10.861798374046598],
                            [-74.7710019350052, 10.86226549730836],
                            [-74.7715598344803, 10.86316286378576],
                            [-74.77178692839516, 10.863475448609668],
                            [-74.77195501305688, 10.863742374915795],
                            [-74.7722339621396, 10.864839930362763],
                            [-74.7713828083579, 10.869497034560792],
                            [-74.77077841715074, 10.872071406041474],
                            [-74.77049231463752, 10.873160150883873],
                            [-74.77009534770333, 10.87420323516239],
                            [-74.76981639796578, 10.876370169199703],
                            [-74.76963400775277, 10.878354463393435],
                            [-74.76921915920686, 10.882719864000604],
                            [-74.76928353287805, 10.883541661931421],
                            [-74.76931571938623, 10.884363457596043],
                            [-74.76948380404794, 10.886003530095168],
                            [-74.76976633050072, 10.887492581879442],
                            [-74.76983070417192, 10.888988649889153],
                            [-74.76953744757338, 10.892093142197577],
                            [-74.76916551502654, 10.896496971806826],
                            [-74.76894378618455, 10.900240526158935],
                            [-74.76916551502654, 10.901329168700459],
                            [-74.76915121078493, 10.902663627362685],
                            [-74.76874351501466, 10.904117478610852],
                            [-74.76851463274217, 10.905009451034097],
                            [-74.76811409040239, 10.907067299883638],
                            [-74.76804256395555, 10.908029497588672],
                            [-74.76793527559495, 10.908795038753992],
                            [-74.76782798723436, 10.909546530938485],
                            [-74.76737022268932, 10.911463883082666],
                            [-74.76690530733323, 10.91262974036893],
                            [-74.7655856604979, 10.916102701452354],
                            [-74.76826429345239, 10.91704731158623],
                            [-74.7690474978299, 10.917268539251515],
                            [-74.76856112480165, 10.918975149610608],
                            [-74.76808547929978, 10.920615031610168],
                            [-74.76730942704307, 10.923220564344117],
                            [-74.76830005602098, 10.923434764555562],
                            [-74.77000951701486, 10.923497971209006],
                            [-74.77119684175706, 10.92354362023611],
                            [-74.77205872535707, 10.923585757991138],
                            [-74.771976470729, 10.924407443018753],
                            [-74.77195501305688, 10.924874467896176],
                            [-74.77177619890428, 10.925889279069843],
                            [-74.77150440194237, 10.927199048237235],
                            [-74.77283835367417, 10.927659045966992],
                            [-74.77360367774965, 10.927961029106411],
                            [-74.77427601770616, 10.928263011617023],
                            [-74.77523803623626, 10.928013700515272],
                            [-74.77656483650209, 10.927718740183307],
                            [-74.77790236429429, 10.927430802961636],
                            [-74.77823853492738, 10.927167445306129],
                            [-74.77867126443017, 10.927286834567537],
                            [-74.77947235107423, 10.929168958912351],
                            [-74.78023052040953, 10.931767392933228],
                            [-74.78000164206605, 10.934042760083853],
                            [-74.78086709976198, 10.935032960707527],
                            [-74.78152513547685, 10.936114452217941],
                            [-74.78199720426348, 10.937771794989791],
                            [-74.78262662887575, 10.93973110158156],
                            [-74.7841429701657, 10.94521568261654],
                            [-74.78585958524492, 10.951016166838441],
                            [-74.78656768842485, 10.953417786122033],
                            [-74.78648185773638, 10.954646678529555],
                            [-74.7860670098453, 10.95644436169272],
                            [-74.78390693577241, 10.96207609683978],
                            [-74.78143215135789, 10.967911359956236],
                            [-74.7798800468445, 10.971134397511282],
                            [-74.77543115528533, 10.979363870095405],
                            [-74.77523803623626, 10.981091187139237],
                            [-74.77523803754595, 10.981954842032852],
                            [-74.77551698597382, 10.982818494400204],
                            [-74.77588176639985, 10.983998113063832],
                            [-74.77603912353517, 10.984728350612475],
                            [-74.77601051374224, 10.985535823172926],
                            [-74.77669715794036, 10.986666281174953],
                            [-74.77726936296678, 10.987866948762667],
                            [-74.77900743440843, 10.989580173801267],
                            [-74.7797727584839, 10.990696572506275],
                            [-74.77976560636309, 10.992346588534703],
                            [-74.78149652437425, 10.995232339809753],
                            [-74.78232622146608, 10.99632063326483],
                            [-74.78262662887575, 10.996945522069842],
                            [-74.78314876512742, 10.997092967600386],
                            [-74.78333830811607, 10.996822651005912],
                            [-74.78323459647073, 10.996376803225624],
                            [-74.78309512160195, 10.995902869749669],
                            [-74.78328824065102, 10.995337658986694],
                            [-74.78343486829546, 10.994786489785648],
                            [-74.78568077043748, 10.993768404144399],
                            [-74.78857398011314, 10.992890741088662],
                            [-74.78915333791521, 10.992760846964664],
                            [-74.79050159454347, 10.99282403881204],
                            [-74.79136347814348, 10.99288371956026],
                            [-74.79254007339479, 10.99382808566576],
                            [-74.79348421096803, 10.994818085494018],
                            [-74.79422092525057, 10.995555317085625],
                            [-74.79475736574388, 10.99636978145882],
                            [-74.79580879167771, 10.99782317273625],
                            [-74.79686021892122, 10.999185282157526],
                            [-74.79843378110674, 11.00142502587048],
                            [-74.79931354566362, 11.002541379088136],
                            [-74.80030775070192, 11.003791128998254],
                            [-74.80065822557664, 11.00431068763929],
                            [-74.80165958404542, 11.005749997957999],
                            [-74.80023622556475, 11.00671187359233],
                            [-74.7993850708008, 11.007428014459537],
                            [-74.7987198829651, 11.008453073111212],
                            [-74.79676008137176, 11.011071873541049],
                            [-74.7955727572844, 11.01268667150303],
                            [-74.79417800728697, 11.014540168057344],
                            [-74.79274749668548, 11.011928419549276],
                            [-74.79178905487062, 11.010117031977927],
                            [-74.79097366333009, 11.008740930789678],
                            [-74.7905445098877, 11.007645662665468]
                        ]
                    }
                }
            ]
        }
    });
    map.addLayer({
        'id': 'lines',
        'type': 'line',
        'source': 'lines',
        'paint': {
            'line-width': 3,
            // Use a get expression (https://docs.mapbox.com/mapbox-gl-js/style-spec/#expressions-get)
            // to set the line-color to a feature property value.
            'line-color': ['get', 'color']
        }
    });
});